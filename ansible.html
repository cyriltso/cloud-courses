---
layout: presentation
---

# Ansible

![Default-aligned image](/img/ansible_logo.png)

Contact: [rleone@scaleway.com](mailto:rleone@scaleway.com)

---

# Problem it solves

- I need to provision/configure machines
- I need to perform actions on a subset of machines

---

# How it works?

---

idempotency

---

agentless

---

# Why do I need it?

???

- you would need to recreate from scratch an instance everytime you want to update something

---

Inventory

Example with ini

---

modules

Don't use only the module shell

Cloud: Scaleway, Amazon, Cloudstack, Openstack, VMWare, Digital Ocean
Clustering: Consul, zookeeper
Commands: Shell, script, expect
Database: mysql, postgresql, redis, riak
Files: copy, fetch, lineinfile, template, unarchive
Messaging: rabbitmq_[binding, exchange, queue, ...]
Monitoring: zabbix, nagios, sensu, monit
Network: A10, F5, Openswitch, cumulus, get_url
Notification: Jabber, slack, mail, irc, hipchat
Packaging: apt, yum, pip, bower, npm, homebrew
Source control: git, gitlab, hg, subversion
system: known_host, authorized_key, user, group

---

# Tasks

- YAML syntax

```

```
---

# playbook

---

# roles

	ansible-galaxy init mon_role

	.
	├── README.md
	├── defaults
	│   └── main.yml
	├── files
	├── handlers
	│   └── main.yml
	├── meta
	│   └── main.yml
	├── tasks
	│   └── main.yml
	├── templates
	├── tests
	│   ├── inventory
	│   └── test.yml
	└── vars
	    └── main.yml

---

# Dynamic inventory

Problem:
- How can I apply a playbook to a set of machines that can change dynamically?

`ansible-playbook -i scaleway_inventory.yml roles/playbook.yml`

---

# Ansible galaxy

Problem: How to reuse content that is generic through deployment?

---

# References

---
